{"version":3,"sources":["webpack:///./src/assets/img/session/iconmonstr-phone-dial.svg","webpack:///./src/home/VideoSession.vue?2298","webpack:///./src/assets/img/session/iconmonstr-phone-hang.svg","webpack:///./src/home/VideoSession.vue?a1b6","webpack:///src/home/VideoSession.vue","webpack:///./src/home/VideoSession.vue?6661","webpack:///./src/home/VideoSession.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","ref","_e","_m","staticRenderFns","name","data","Peer","window","localId","props","sessionId","mounted","webRtcLinkFirst","setAttribute","document","head","appendChild","configureSession","console","log","currentSession","computed","methods","openFullscreen","elem","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","openPictureInPicture","localVideo","requestPictureInPicture","webkitRequestPictureInPicture","msRequestPictureInPicture","component"],"mappings":"mGAAAA,EAAOC,QAAU,IAA0B,iD,kCCA3C,W,uBCAAD,EAAOC,QAAU,IAA0B,iD,kECA3C,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,uBAAuBH,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACN,EAAIO,GAAG,+HAA+HH,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,UAAU,CAACJ,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACK,IAAI,iBAAiBD,MAAM,CAAC,GAAK,mBAAmB,SAAW,QAAQJ,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,QAAQ,CAACK,IAAI,gBAAgBD,MAAM,CAAC,GAAK,kBAAkB,qBAAuB,QAAQJ,EAAG,SAAS,CAACE,YAAY,0BAA0BE,MAAM,CAAC,GAAK,oBAAoB,CAACJ,EAAG,MAAM,CAACI,MAAM,CAAC,IAAM,EAAQ,QAAmD,IAAM,UAAWR,EAAa,UAAEI,EAAG,OAAO,CAACE,YAAY,mBAAmBN,EAAIU,OAAOV,EAAIW,GAAG,QAC12BC,EAAkB,CAAC,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,YAAY,yBAAyBE,MAAM,CAAC,GAAK,mBAAmB,mBAAmB,KAAK,CAACJ,EAAG,MAAM,CAACI,MAAM,CAAC,IAAM,EAAQ,QAAmD,IAAM,c,4CC0B5S,GACEK,KAAM,eACNC,KAFF,WAGI,MAAO,CACLC,KAAMC,OAAOD,KACbE,QAAS,OAGbC,MAAO,CACLC,UAAW,CAAf,cAEEC,QAXF,WAYI,IAAJ,mCACIC,EAAgBC,aAAa,MAAO,6CACpCC,SAASC,KAAKC,YAAYJ,GAC1BpB,KAAKyB,mBACLC,QAAQC,IAAI,gBAAiB3B,KAAK4B,iBAEpCC,SAAU,CACRD,eADJ,WACA,IACA,iBACM,OAAOV,IAGXY,QAAS,CACPC,eADJ,WAEM,IAAN,4BACUC,EAAKC,kBACPD,EAAKC,oBACb,0BACQD,EAAKE,0BACb,uBACQF,EAAKG,uBAGTC,qBAXJ,WAYM,IAAN,2BACUC,EAAWC,wBACbD,EAAWC,0BACnB,gCACQD,EAAWE,gCACnB,8BACQF,EAAWG,6BAGf,iBArBJ,WAqBA,6KACA,6CAEA,6CACA,8CACA,8CALA,SAaA,uBACA,cACA,SACA,WAEA,qBAlBA,cAaA,EAbA,OAqBA,WACA,cACA,iBAvBA,UAwBA,8BAxBA,QAyBA,6BACA,2CACA,UAIA,uCAGA,qBAIA,sCAEA,6KAEA,cACA,iBAHA,SAIA,8BAJA,kGAOA,2BACA,gEACA,oBAGA,iEAGA,qCACA,eAIA,mCACA,YAEA,6KAEA,cACA,iBAHA,SAIA,8BAJA,kGAOA,2BACA,gEACA,oBAGA,gEAGA,sCA9EA,iDCxEsV,I,wBCQlVC,EAAY,eACd,EACA3C,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E","file":"static/js/chunk-d88b3bf2.3b1687ca.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/iconmonstr-phone-dial.47ddcd34.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoSession.vue?vue&type=style&index=0&id=400add97&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"static/img/iconmonstr-phone-hang.a2b51b65.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',{staticClass:\"heading\"},[_vm._v(\"DAO Video Session\")]),_c('p',{staticClass:\"note\"},[_vm._v(\" Please click connect, to get connected to the doctor. Please make sure to give permission for your camera & microphone. \")]),_c('div',{attrs:{\"id\":\"frame\"}},[_c('div',{staticClass:\"remote-stream\"},[_c('video',{ref:\"jsRemoteStream\",attrs:{\"id\":\"js-remote-stream\",\"controls\":\"\"}})]),_c('div',{staticClass:\"local-stream\"},[_c('video',{ref:\"jsLocalStream\",attrs:{\"id\":\"js-local-stream\",\"autoPictureInPicture\":\"\"}})]),_c('button',{staticClass:\"btn bg-success btn-dial\",attrs:{\"id\":\"js-call-trigger\"}},[_c('img',{attrs:{\"src\":require(\"../assets/img/session/iconmonstr-phone-dial.svg\"),\"alt\":\"dial\"}}),(_vm.isLoading)?_c('span',{staticClass:\"spinner-border\"}):_vm._e()]),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn bg-danger btn-dial\",attrs:{\"id\":\"js-close-trigger\",\"js-close-trigger\":\"\"}},[_c('img',{attrs:{\"src\":require(\"../assets/img/session/iconmonstr-phone-hang.svg\"),\"alt\":\"hang\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <h1 class=\"heading\">DAO Video Session</h1>\r\n    <p class=\"note\">\r\n      Please click connect, to get connected to the doctor.\r\n      Please make sure to give permission for your camera & microphone.\r\n    </p>\r\n    <div id=\"frame\">\r\n      <div class=\"remote-stream\">\r\n        <video id=\"js-remote-stream\" controls ref=\"jsRemoteStream\"></video>\r\n      </div>\r\n      <div class=\"local-stream\">\r\n        <video id=\"js-local-stream\" autoPictureInPicture ref=\"jsLocalStream\"></video>\r\n      </div>\r\n      <button class=\"btn bg-success btn-dial\" id=\"js-call-trigger\">\r\n        <img src=\"../assets/img/session/iconmonstr-phone-dial.svg\" alt=\"dial\">\r\n        <span v-if=\"isLoading\" class=\"spinner-border\"></span>\r\n      </button>\r\n      <button id=\"js-close-trigger\" js-close-trigger class=\"btn bg-danger btn-dial\">\r\n        <img src=\"../assets/img/session/iconmonstr-phone-hang.svg\" alt=\"hang\">\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'VideoSession',\r\n  data() {\r\n    return {\r\n      Peer: window.Peer,\r\n      localId: null,\r\n    };\r\n  },\r\n  props: {\r\n    sessionId: { type: String },\r\n  },\r\n  mounted() {\r\n    const webRtcLinkFirst = document.createElement('script');\r\n    webRtcLinkFirst.setAttribute('src', '//cdn.webrtc.ecl.ntt.com/skyway-latest.js');\r\n    document.head.appendChild(webRtcLinkFirst);\r\n    this.configureSession();\r\n    console.log('this session:', this.currentSession);\r\n  },\r\n  computed: {\r\n    currentSession() {\r\n      const { sessionId } = this;\r\n      return sessionId;\r\n    },\r\n  },\r\n  methods: {\r\n    openFullscreen() {\r\n      const elem = this.$refs.jsRemoteStream;\r\n      if (elem.requestFullscreen) {\r\n        elem.requestFullscreen();\r\n      } else if (elem.webkitRequestFullscreen) { /* Safari */\r\n        elem.webkitRequestFullscreen();\r\n      } else if (elem.msRequestFullscreen) { /* IE11 */\r\n        elem.msRequestFullscreen();\r\n      }\r\n    },\r\n    openPictureInPicture() {\r\n      const localVideo = this.$refs.jsLocalStream;\r\n      if (localVideo.requestPictureInPicture) {\r\n        localVideo.requestPictureInPicture();\r\n      } else if (localVideo.webkitRequestPictureInPicture) { /* Safari */\r\n        localVideo.webkitRequestPictureInPicture();\r\n      } else if (localVideo.msRrequestPictureInPicture) { /* IE11 */\r\n        localVideo.msRequestPictureInPicture();\r\n      }\r\n    },\r\n    async configureSession() {\r\n      const localVideo = document.getElementById('js-local-stream');\r\n      // const localId = document.getElementById('js-local-id');\r\n      const callTrigger = document.getElementById('js-call-trigger');\r\n      const closeTrigger = document.getElementById('js-close-trigger');\r\n      const remoteVideo = document.getElementById('js-remote-stream');\r\n      // const remoteId = document.getElementById('js-remote-id');\r\n      // const meta = document.getElementById('js-meta');\r\n      // const sdkSrc = document.querySelector('script[src*=skyway]');\r\n      // meta.innerText = `\r\n      //     UA: ${navigator.userAgent}\r\n      //     SDK: ${sdkSrc ? sdkSrc.src : 'unknown'}\r\n      //   `.trim();\r\n      const localStream = await navigator.mediaDevices\r\n        .getUserMedia({\r\n          audio: true,\r\n          video: true,\r\n        })\r\n        .catch(console.error);\r\n\r\n      // Render local stream\r\n      localVideo.muted = true;\r\n      localVideo.srcObject = localStream;\r\n      localVideo.playsInline = true;\r\n      await localVideo.play().catch(console.error);\r\n      window.peer = new window.Peer({\r\n        key: '3006e54d-f286-4e81-8c9d-f6bac3816192',\r\n        debug: 3,\r\n      });\r\n\r\n      // Register caller handler\r\n      callTrigger.addEventListener('click', () => {\r\n        // Note that you need to ensure the peer has connected to signaling server\r\n        // before using methods of peer instance.\r\n        if (!window.peer.open) {\r\n          return;\r\n        }\r\n\r\n        const mediaConnection = window.peer.call(this.sessionId, localStream);\r\n\r\n        mediaConnection.on('stream', async (stream) => {\r\n          // Render remote stream for caller\r\n          remoteVideo.srcObject = stream;\r\n          remoteVideo.playsInline = true;\r\n          await remoteVideo.play().catch(console.error);\r\n        });\r\n\r\n        mediaConnection.once('close', () => {\r\n          remoteVideo.srcObject.getTracks().forEach((track) => track.stop());\r\n          remoteVideo.srcObject = null;\r\n        });\r\n\r\n        closeTrigger.addEventListener('click', () => mediaConnection.close(true));\r\n      });\r\n\r\n      window.peer.once('open', (id) => {\r\n        this.localId = id;\r\n      });\r\n\r\n      // Register callee handler\r\n      window.peer.on('call', (mediaConnection) => {\r\n        mediaConnection.answer(localStream);\r\n\r\n        mediaConnection.on('stream', async (stream) => {\r\n          // Render remote stream for callee\r\n          remoteVideo.srcObject = stream;\r\n          remoteVideo.playsInline = true;\r\n          await remoteVideo.play().catch(console.error);\r\n        });\r\n\r\n        mediaConnection.once('close', () => {\r\n          remoteVideo.srcObject.getTracks().forEach((track) => track.stop());\r\n          remoteVideo.srcObject = null;\r\n        });\r\n\r\n        closeTrigger.addEventListener('click', () => mediaConnection.close(true));\r\n      });\r\n\r\n      window.peer.on('error', console.error);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#frame {\r\n  min-width: 360px;\r\n  /* height: 82vh; */\r\n  background: #E6EAEA;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n@media screen and (max-width: 991px) and (min-width: 800px) {\r\n  #frame {\r\n    margin-left: -10%;\r\n    margin-right: -10%;\r\n  }\r\n}\r\n@media screen and (max-width: 800px) and (min-width: 576px) {\r\n  #frame {\r\n    margin-left: -5%;\r\n    margin-right: -5%;\r\n  }\r\n}\r\n@media screen and (max-width: 360px) {\r\n  #frame {\r\n    width: 100%;\r\n    height: 100vh;\r\n  }\r\n}\r\n.remote-stream, .local-stream {\r\n  width: 50%;\r\n}\r\n\r\nvideo {\r\n  width: 100%;\r\n  border-radius: 5px;\r\n  margin: 1px;\r\n}\r\n.remote-stream video {\r\n  padding-right: 2px;\r\n}\r\n.local-stream video {\r\n  padding-left: 2px;\r\n}\r\n\r\n@media screen and (max-width: 767px) {\r\n  .local-stream, .remote-stream {\r\n    width: 100%;\r\n  }\r\n}\r\n.tab-pane a{\r\n  display: block;\r\n  color: #272627;\r\n}\r\n.clicked {\r\n  background-color: #9a7339;\r\n  color: whitesmoke !important;\r\n}\r\nbutton:focus {\r\n  border-color: #9a7339;\r\n  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.075) inset, 0px 0px 8px rgba(154, 115, 57, 0.5);\r\n}\r\n.features {\r\n  width: 100%;\r\n  min-width: 300px;\r\n}\r\n.spinner-border {\r\n    height: 1.3rem;\r\n    width: 1.3rem;\r\n    margin-top: 0.7px;\r\n    margin-bottom: -1.3px;\r\n  }\r\n#js-local-stream {\r\n  -o-transform : scaleX(-1);\r\n  -moz-transform : scaleX(-1);\r\n  -webkit-transform : scaleX(-1);\r\n  -ms-transform: scaleX(-1);\r\n  transform : scaleX(-1);\r\n}\r\naudio::-webkit-media-controls-timeline,\r\nvideo::-webkit-media-controls-timeline {\r\n  display: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoSession.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoSession.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoSession.vue?vue&type=template&id=400add97&scoped=true&\"\nimport script from \"./VideoSession.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoSession.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoSession.vue?vue&type=style&index=0&id=400add97&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"400add97\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}