(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f16a6be4"],{"193c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"frame"}},[r("div",{attrs:{id:"sidepanel"}},[r("div",{attrs:{id:"search"}},[r("img",{staticClass:"find",attrs:{src:n("8e26"),alt:""}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],attrs:{type:"text",placeholder:"Search contacts..."},domProps:{value:e.searchInput},on:{keydown:function(t){return e.applySearch()},input:function(t){t.target.composing||(e.searchInput=t.target.value)}}})]),r("div",{attrs:{id:"contacts"}},[r("ul",e._l(e.filteredContacts,(function(t,n){return r("div",{key:n},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"c.visible"}],on:{click:function(n){return e.activateRoom(t)}}},[r("li",{staticClass:"contact",class:{active:t.active}},[r("span",{staticClass:"text-danger notification"},[e._v(e._s(0===t.unread?"":t.unread))]),r("div",{staticClass:"wrap"},[r("div",{staticClass:"contact-logo"},[e._v(e._s(t.user_info[1]||"U"))]),r("div",{staticClass:"meta"},[r("p",{staticClass:"name"},[e._v(e._s(t.user_info))]),r("p",{staticClass:"preview"},[e._v(e._s(t.message))])])])])])])})),0)])]),r("div",{staticClass:"content"},e._l(e.onlineUsers,(function(t,n){return r("div",{key:n},[t.active?r("div",[r("ChatInstance",{attrs:{room:t.room,userConnect:t.user_id||"0",chatHeader:t.user_info},on:{unreadChanged:e.readChanged}})],1):e._e()])})),0)])},s=[],i=(n("4de4"),n("7db0"),n("4160"),n("a630"),n("caad"),n("45fc"),n("b0c0"),n("d3b7"),n("2532"),n("3ca3"),n("159b"),function(){return n.e("chunk-97c8eb4c").then(n.bind(null,"74eb"))}),o={name:"ChatAdmin",data:function(){return{onlineUsers:[],timeInterval:null,searchInput:""}},mounted:function(){this.getOnlineUsers(),this.timeInterval=setInterval(this.getOnlineUsers,1e4),this.$nextTick((function(){}))},computed:{filteredContacts:function(){var e=this,t=[];return this.searchInput&&""!==this.searchInput?(t=this.onlineUsers.find((function(t){return t.user_info===e.searchInput})),t=this.onlineUsers.filter((function(t){return t.user_info.toLowerCase().includes(e.searchInput.toLowerCase())}))):t=this.onlineUsers,t}},components:{ChatInstance:i},methods:{applySearch:function(){var e=this;this.$nextTick((function(){console.log("search is",e.searchInput)}))},readChanged:function(e){console.log("unread value changed",e);var t=this.onlineUsers.find((function(t){return t.room===e.room}));t.unread=e.unread},activateRoom:function(e){Array.from(this.onlineUsers).forEach((function(t){t.active=t===e}))},getOnlineUsers:function(){var e=this;console.log("my route is:",this.$router.currentRoute.name),"ChatAdmin"===this.$router.currentRoute.name?(console.log("refresh online users"),this.$store.dispatch("chat/getOnlineUsers").then((function(t){Array.from(t).forEach((function(t){var n={visible:!0,last_seen:t.last_seen,unread:t.unread,active:!1,room:t.room,user_info:t.user_info,user_id:t.user_id};if(e.onlineUsers.some((function(e){return e.room===n.room&&e.user_info===t.user_info}))){var r=e.onlineUsers.find((function(e){return e.room===n.room&&e.user_info===t.user_info}));r.unread=t.unread}else e.onlineUsers.push(n)})),console.log("online users are ",e.onlineUsers)})).catch((function(e){console.log(e)}))):clearInterval(this.timeInterval)},getContacts:function(){this.$store.dispatch("chat/getContacts").then((function(e){console.log(e)}))}}},a=o,c=(n("f69f"),n("2877")),u=Object(c["a"])(a,r,s,!1,null,"6d770214",null);t["default"]=u.exports},2532:function(e,t,n){"use strict";var r=n("23e7"),s=n("5a34"),i=n("1d80"),o=n("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(i(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var r=n("861d"),s=n("c6b6"),i=n("b622"),o=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==s(e))}},"45fc":function(e,t,n){"use strict";var r=n("23e7"),s=n("b727").some,i=n("a640"),o=n("ae40"),a=i("some"),c=o("some");r({target:"Array",proto:!0,forced:!a||!c},{some:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"52ac":function(e,t,n){},"5a34":function(e,t,n){var r=n("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"7db0":function(e,t,n){"use strict";var r=n("23e7"),s=n("b727").find,i=n("44d2"),o=n("ae40"),a="find",c=!0,u=o(a);a in[]&&Array(1)[a]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!u},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},"8e26":function(e,t,n){e.exports=n.p+"static/img/iconmonstr-magnifier-2.3ab4627d.svg"},ab13:function(e,t,n){var r=n("b622"),s=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,"/./"[e](t)}catch(r){}}return!1}},caad:function(e,t,n){"use strict";var r=n("23e7"),s=n("4d64").includes,i=n("44d2"),o=n("ae40"),a=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!a},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},f69f:function(e,t,n){"use strict";n("52ac")}}]);
//# sourceMappingURL=chunk-f16a6be4.15074264.js.map