(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d88b3bf2"],{6285:function(e,t,n){e.exports=n.p+"static/img/iconmonstr-phone-dial.47ddcd34.svg"},7321:function(e,t,n){"use strict";n("90f3")},"8f6d":function(e,t,n){e.exports=n.p+"static/img/iconmonstr-phone-hang.a2b51b65.svg"},"90f3":function(e,t,n){},fbe1:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"heading"},[e._v("DAO Video Session")]),r("p",{staticClass:"note"},[e._v(" Please click connect, to get connected to the doctor. Please make sure to give permission for your camera & microphone. ")]),r("div",{attrs:{id:"frame"}},[r("div",{staticClass:"remote-stream"},[r("video",{ref:"jsRemoteStream",attrs:{id:"js-remote-stream",controls:""}})]),r("div",{staticClass:"local-stream"},[r("video",{ref:"jsLocalStream",attrs:{id:"js-local-stream",autoPictureInPicture:""}})]),r("button",{staticClass:"btn bg-success btn-dial",attrs:{id:"js-call-trigger"}},[r("img",{attrs:{src:n("6285"),alt:"dial"}}),e.isLoading?r("span",{staticClass:"spinner-border"}):e._e()]),e._m(0)])])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn bg-danger btn-dial",attrs:{id:"js-close-trigger","js-close-trigger":""}},[r("img",{attrs:{src:n("8f6d"),alt:"hang"}})])}],c=(n("4160"),n("159b"),n("96cf"),n("1da1")),i={name:"VideoSession",data:function(){return{Peer:window.Peer,localId:null}},props:{sessionId:{type:String}},mounted:function(){var e=document.createElement("script");e.setAttribute("src","//cdn.webrtc.ecl.ntt.com/skyway-latest.js"),document.head.appendChild(e),this.configureSession(),console.log("this session:",this.currentSession)},computed:{currentSession:function(){var e=this.sessionId;return e}},methods:{openFullscreen:function(){var e=this.$refs.jsRemoteStream;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},openPictureInPicture:function(){var e=this.$refs.jsLocalStream;e.requestPictureInPicture?e.requestPictureInPicture():e.webkitRequestPictureInPicture?e.webkitRequestPictureInPicture():e.msRrequestPictureInPicture&&e.msRequestPictureInPicture()},configureSession:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.getElementById("js-local-stream"),r=document.getElementById("js-call-trigger"),s=document.getElementById("js-close-trigger"),i=document.getElementById("js-remote-stream"),t.next=6,navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).catch(console.error);case 6:return o=t.sent,n.muted=!0,n.srcObject=o,n.playsInline=!0,t.next=12,n.play().catch(console.error);case 12:window.peer=new window.Peer({key:"3006e54d-f286-4e81-8c9d-f6bac3816192",debug:3}),r.addEventListener("click",(function(){if(window.peer.open){var t=window.peer.call(e.sessionId,o);t.on("stream",function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.srcObject=t,i.playsInline=!0,e.next=4,i.play().catch(console.error);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.once("close",(function(){i.srcObject.getTracks().forEach((function(e){return e.stop()})),i.srcObject=null})),s.addEventListener("click",(function(){return t.close(!0)}))}})),window.peer.once("open",(function(t){e.localId=t})),window.peer.on("call",(function(e){e.answer(o),e.on("stream",function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.srcObject=t,i.playsInline=!0,e.next=4,i.play().catch(console.error);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.once("close",(function(){i.srcObject.getTracks().forEach((function(e){return e.stop()})),i.srcObject=null})),s.addEventListener("click",(function(){return e.close(!0)}))})),window.peer.on("error",console.error);case 17:case"end":return t.stop()}}),t)})))()}}},o=i,a=(n("7321"),n("2877")),u=Object(a["a"])(o,r,s,!1,null,"400add97",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-d88b3bf2.3b1687ca.js.map